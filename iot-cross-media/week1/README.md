# 第一週：IoT 基礎概念與系統環境

## 🎯 學習目標

完成本週學習後，您將能夠：

1. **理解 IoT 基本架構** - 認識感測器、通訊、處理和應用層
2. **掌握系統安裝** - 獨立完成教學版環境建置
3. **熟悉開發工具** - 會使用瀏覽器開發者工具和基本除錯
4. **建立第一個 API 連線** - 理解前後端如何溝通

## 📚 理論基礎

### IoT 系統四層架構

```
┌─────────────────────────────────────┐
│          應用層 (Application)       │  <- 您看到的網頁界面
├─────────────────────────────────────┤
│          處理層 (Processing)        │  <- 後端伺服器和資料庫
├─────────────────────────────────────┤
│          通訊層 (Communication)     │  <- HTTP, WebSocket
├─────────────────────────────────────┤
│          感知層 (Perception)        │  <- 感測器和控制器
└─────────────────────────────────────┘
```

### 🔍 本教學系統對應關係

| 層級 | 真實 IoT | 教學系統 | 說明 |
|------|----------|----------|------|
| 應用層 | 手機 APP、儀表板 | jQuery 前端頁面 | 用戶看到的界面 |
| 處理層 | 雲端伺服器、邊緣運算 | Node.js + SQLite | 資料處理和儲存 |
| 通訊層 | WiFi、4G、藍芽 | HTTP API、WebSocket | 資料傳輸協定 |
| 感知層 | 實體感測器 | 軟體模擬器 | 資料產生來源 |

## 🛠️ 實作步驟

### 步驟 1: 環境安裝 (15 分鐘)

1. **檢查 Node.js 版本**
   ```bash
   node --version
   # 應該顯示 v16.0.0 或更高版本
   ```

2. **執行一鍵安裝**
   ```bash
   cd infrastructure/educational
   npm run setup-education
   ```

3. **選擇安裝選項**
   - 選擇「🎓 完整教學版」
   - 確認「包含範例程式碼和教學文檔」
   - 選擇「📊 包含示範資料」

### 步驟 2: 系統啟動 (5 分鐘)

1. **啟動系統**
   ```bash
   npm run start-education
   ```

2. **確認服務狀態**
   - 後端：http://localhost:3001 
   - 前端：http://localhost:3000
   - 瀏覽器自動開啟前端頁面

### 步驟 3: 界面導覽 (10 分鐘)

1. **儀表板頁面**
   - 觀察 4 個虛擬設備狀態
   - 注意即時資料更新

2. **設備管理頁面**
   - 查看設備列表
   - 點擊設備查看詳細資料

3. **資料視覺化頁面**
   - 觀察溫度、濕度、光線的變化趨勢
   - 嘗試調整時間範圍

### 步驟 4: 開發者工具探索 (10 分鐘)

1. **開啟開發者工具**
   - 按 F12 或右鍵選擇「檢查」

2. **Network 標籤頁**
   - 重新整理頁面，觀察 API 請求
   - 找到 `/api/devices` 請求，查看回應資料

3. **Console 標籤頁**
   - 執行簡單的 JavaScript：
   ```javascript
   console.log('Hello IoT World!');
   ```

## 🧪 實驗練習

### 實驗 1: API 測試 (15 分鐘)

**目標**: 手動呼叫 API，理解資料流向

1. **開啟新瀏覽器標籤**，前往：
   ```
   http://localhost:3001/api/devices
   ```

2. **應該看到 JSON 格式的設備資料**：
   ```json
   [
     {
       "id": 1,
       "device_id": "TEMP_001",
       "name": "溫度感測器 #1",
       "type": "temperature",
       "status": "online"
     }
   ]
   ```

3. **嘗試其他 API 端點**：
   - `/api/devices/TEMP_001/data` - 特定設備的資料
   - `/api/sensor-data/latest` - 最新感測器資料

### 實驗 2: 即時資料觀察 (10 分鐘)

**目標**: 體驗 IoT 系統的即時特性

1. **同時開啟兩個瀏覽器視窗**，都前往前端頁面

2. **觀察資料同步更新**：
   - 資料是否在兩個視窗同時更新？
   - 更新頻率大約是多少秒？

3. **在開發者工具 Console 輸入**：
   ```javascript
   // 監聽 WebSocket 訊息
   window.addEventListener('message', (event) => {
       console.log('收到即時資料:', event.data);
   });
   ```

### 實驗 3: 資料探索 (15 分鐘)

**目標**: 理解資料庫結構和資料關係

1. **查看資料庫檔案位置**：
   ```
   backend-simple/database/iot_education.db
   ```

2. **使用瀏覽器訪問內建的資料庫瀏覽器**：
   ```
   http://localhost:3001/db-browser
   ```

3. **探索資料表結構**：
   - `devices` - 設備基本資訊
   - `sensor_data` - 感測器歷史資料
   - `users` - 用戶資料（目前為空）

## 💡 思考題

### 基礎理解題

1. **架構分析**：
   - 在我們的教學系統中，哪一層負責產生感測器資料？
   - 前端如何知道後端的資料已經更新？

2. **資料流向**：
   - 描述從感測器產生資料到顯示在網頁上的完整流程
   - 如果網路斷線，系統的哪些功能會受影響？

3. **技術比較**：
   - HTTP 和 WebSocket 有什麼不同？分別適用於什麼場景？
   - 為什麼選擇 SQLite 而不是 MySQL 作為教學版資料庫？

### 進階思考題

1. **系統設計**：
   - 如果要支援 1000 個同時在線的虛擬設備，需要做哪些調整？
   - 如何確保感測器資料的準確性和可靠性？

2. **安全性考量**：
   - 目前系統有哪些潛在的安全風險？
   - 如何保護 IoT 設備不被惡意攻擊？

## 📝 作業任務

### 必做任務 (基礎分)

1. **環境建置證明**：
   - 截圖顯示系統成功啟動畫面
   - 截圖顯示儀表板頁面正常運作

2. **API 呼叫記錄**：
   - 使用開發者工具記錄至少 3 個不同的 API 請求
   - 說明每個 API 的功能和回應內容

3. **學習筆記**：
   - 用自己的話解釋 IoT 四層架構
   - 列出本週學到的 3 個新概念

### 選做任務 (加分)

1. **深度探索**：
   - 找出系統中虛擬感測器資料的生成邏輯
   - 嘗試修改資料更新頻率

2. **問題發現**：
   - 發現並記錄系統的任何異常行為
   - 提出改善建議

3. **創意發揮**：
   - 設計一個新的感測器類型（只需要概念設計）
   - 畫出理想的儀表板界面草圖

## 🎯 學習檢核清單

完成本週學習後，請確認您已達成：

- [ ] ✅ 成功安裝並啟動教學系統
- [ ] ✅ 能夠說出 IoT 四層架構的組成
- [ ] ✅ 會使用瀏覽器開發者工具觀察 API 請求
- [ ] ✅ 理解前後端分離的基本概念
- [ ] ✅ 能夠解釋即時資料更新的運作原理
- [ ] ✅ 完成所有實驗練習
- [ ] ✅ 繳交作業任務

## 🔗 延伸學習資源

### 📖 推薦閱讀

1. **IoT 入門**：
   - [什麼是物聯網 (IoT)？](https://aws.amazon.com/tw/what-is/iot/)
   - [IoT 架構設計原則](https://www.ibm.com/tw-zh/topics/internet-of-things)

2. **Web 技術基礎**：
   - [HTTP 協定簡介](https://developer.mozilla.org/zh-TW/docs/Web/HTTP)
   - [API 設計最佳實務](https://restfulapi.net/)

### 🎥 推薦影片

- 「IoT 物聯網概念介紹」(YouTube)
- 「前後端分離架構解析」(YouTube)

### 🛠️ 實用工具

- [Postman](https://www.postman.com/) - API 測試工具
- [JSON Formatter](https://jsonformatter.org/) - JSON 格式化工具

## 📞 支援與協助

### 常見問題快速解決

1. **系統無法啟動**：
   - 檢查 Node.js 版本
   - 重新執行安裝步驟

2. **頁面顯示錯誤**：
   - 清除瀏覽器快取
   - 檢查後端服務是否運行

3. **資料沒有更新**：
   - 重新整理頁面
   - 檢查 WebSocket 連線狀態

### 聯絡方式

- **課程論壇**：發布技術問題
- **教師 Email**：緊急問題聯絡
- **同學群組**：互相協助討論

---

恭喜您完成第一週的學習！下週我們將深入學習前端 jQuery 開發。記得完成作業並準備好迎接更多挑戰！ 🚀
